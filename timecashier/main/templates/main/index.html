{% extends "main/base.html" %}

{% load crispy_forms_tags %}

{% load static %}
{% block style %}<link href="{% static 'entries/css/style.css' %}" rel="stylesheet">{% endblock %}
{% block title %}Home{% endblock %}

{{% block content %}
<input type="hidden" id="latitude">
<input type="hidden" id="longitude">


{% csrf_token %}
<script>getLocation()</script>

<h2>Dashboard</h2>

<a id="mapslink" target="_blank"></a><br>

<div class="row" style="margin-top: 30px; padding: 10px;">
</div>

<!--<div class="row border" style="margin-top: 30px; padding: 10px;">-->
{% crispy form  %}
<!--</div>-->
<div class="row" style="margin-top: 30px; padding: 10px;">
    <h4>Aktywne zadania</h4>
    <table id="table_active_entries" class="table table-striped table-dark">
        <thead><th>Klient</th><th>Start</th><th>Koniec</th><th>Długość</th></thead>
        <tbody>
        {% for entry in active_entries %}
        <tr><td>{{ entry.client.name }}</td><td>{{ entry.start }}</td><td>{{ entry.end }}</td><td></td></tr>
        {% endfor %}
        </tbody>
    </table>
    <script>
let table = new DataTable('#table_active_entries', {
    "order": [[ 1, "desc" ], [2, "desc"]],
    "pageLength":5,
    "searching": false,
    "paging": false,
    "info": false,
    "lengthChange":false
});
</script>
</div>
{% endblock %}